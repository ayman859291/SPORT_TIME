# التحديثات الجديدة - وقت الرياضة

## التحديثات المضافة

### 1. تغيير اسم التطبيق
- تم تغيير اسم التطبيق من "متتبع التمارين الرياضية" إلى **"وقت الرياضة"**
- تم تحديث العنوان في جميع الصفحات
- تم تحديث عنوان المتصفح (index.html)

### 2. إضافة ميزة رفع الصور
تم إضافة إمكانية رفع صورة لكل تمرين بشكل اختياري مع الميزات التالية:

#### الميزات الرئيسية:
- ✅ رفع صور اختياري (ليس إجباري)
- ✅ دعم صيغ متعددة: JPEG, PNG, GIF, WEBP, AVIF
- ✅ حد أقصى للحجم: 1 ميجابايت
- ✅ ضغط تلقائي للصور الكبيرة
- ✅ شريط تقدم أثناء الرفع
- ✅ إشعارات واضحة للنجاح/الفشل
- ✅ عرض الصور في بطاقات التمارين

#### الضغط التلقائي:
عند رفع صورة أكبر من 1 ميجابايت، يقوم النظام تلقائياً بـ:
1. تحويل الصورة إلى صيغة WEBP (أكثر كفاءة)
2. تقليل الدقة إلى 1080p مع الحفاظ على نسبة العرض إلى الارتفاع
3. ضبط الجودة تدريجياً حتى يصبح الحجم أقل من 1 ميجابايت
4. إشعار المستخدم بالحجم النهائي بعد الضغط

#### الأمان والتحقق:
- ✅ التحقق من نوع الملف
- ✅ التحقق من حجم الملف
- ✅ أسماء الملفات يجب أن تحتوي على أحرف إنجليزية وأرقام فقط
- ✅ رسائل خطأ واضحة ومفيدة

#### التخزين:
- تم إنشاء Bucket في Supabase Storage: `app-854zbfquogld_workout_images`
- الصور متاحة للقراءة العامة
- رفع الصور متاح للجميع (لا يتطلب تسجيل دخول)

### 3. تحديثات قاعدة البيانات
- تم إضافة حقل `image_url` إلى جدول `workouts`
- تم إنشاء Bucket للتخزين السحابي
- تم إضافة سياسات الأمان للقراءة والكتابة

### 4. تحديثات الواجهة
- تم إضافة مكون `ImageUpload` في صفحة إضافة التمرين
- تم تحديث بطاقات التمارين لعرض الصور في:
  - الصفحة الرئيسية (Dashboard)
  - صفحة السجل (History)
- عرض الصور بشكل جميل مع حواف دائرية
- ارتفاع ثابت للصور: 160 بكسل

## الملفات المضافة/المعدلة

### ملفات جديدة:
1. `src/lib/imageUpload.ts` - وظائف رفع وضغط الصور
2. `src/components/common/ImageUpload.tsx` - مكون واجهة رفع الصور
3. `supabase/migrations/00002_add_workout_images.sql` - Migration للصور (محاولة أولى)
4. `supabase/migrations/00003_add_workout_images_v2.sql` - Migration النهائي للصور

### ملفات معدلة:
1. `index.html` - تحديث عنوان التطبيق
2. `src/types/types.ts` - إضافة حقل image_url
3. `src/pages/AddWorkout.tsx` - إضافة مكون رفع الصور
4. `src/pages/Dashboard.tsx` - عرض الصور + تحديث اسم التطبيق
5. `src/pages/History.tsx` - عرض الصور
6. `IMPLEMENTATION.md` - تحديث الوثائق

## كيفية الاستخدام

### رفع صورة لتمرين:
1. افتح صفحة "إضافة تمرين"
2. املأ تفاصيل التمرين
3. في قسم "صورة التمرين (اختياري)"، انقر على المنطقة المخصصة أو زر "اختر صورة"
4. اختر صورة من جهازك
5. انتظر حتى يكتمل الرفع (سيظهر شريط التقدم)
6. إذا كانت الصورة كبيرة، سيتم ضغطها تلقائياً
7. احفظ التمرين

### عرض الصور:
- الصور تظهر تلقائياً في بطاقات التمارين
- في الصفحة الرئيسية: تظهر صور تمارين اليوم
- في صفحة السجل: تظهر صور جميع التمارين

### حذف صورة:
- في صفحة إضافة التمرين، انقر على زر X في أعلى الصورة
- يمكنك حفظ التمرين بدون صورة

## ملاحظات مهمة

1. **الصور اختيارية**: لا يجب رفع صورة لكل تمرين
2. **الحجم الأقصى**: 1 ميجابايت (سيتم الضغط تلقائياً إذا كانت أكبر)
3. **الصيغ المدعومة**: JPEG, PNG, GIF, WEBP, AVIF
4. **أسماء الملفات**: يجب أن تحتوي على أحرف إنجليزية وأرقام فقط
5. **الأداء**: الصور يتم تحميلها بشكل كسول (lazy loading) لتحسين الأداء

## البيانات الموجودة

لا تتأثر التمارين الموجودة حالياً. جميع التمارين السابقة ستظهر بدون صور، ويمكن إضافة صور للتمارين الجديدة فقط.
